<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Celestial Login</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #c3a6ff; --bg: #0f0c29; --glass: rgba(255, 255, 255, 0.05); }
    body { margin: 0; font-family: 'Outfit', sans-serif; background: linear-gradient(135deg, #0f0c29, #302b63, #24243e); color: white; height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; }
    .stars { position: absolute; width: 100%; height: 100%; background: url('https://www.transparenttextures.com/patterns/stardust.png'); opacity: 0.3; z-index: 1; }
    .card { background: var(--glass); backdrop-filter: blur(15px); padding: 40px; border-radius: 40px; border: 1px solid rgba(255, 255, 255, 0.2); text-align: center; width: 90%; max-width: 400px; z-index: 2; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
    h1 { font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 25px; background: linear-gradient(to right, #fff, var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    input { width: 100%; padding: 15px; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 15px; color: white; margin-bottom: 15px; box-sizing: border-box; text-align: center; outline: none; transition: 0.3s; }
    input:focus { border-color: var(--accent); background: rgba(255, 255, 255, 0.1); }
    button { width: 100%; padding: 15px; border: none; border-radius: 15px; background: var(--accent); color: #0f0c29; font-weight: 600; cursor: pointer; transition: 0.3s; }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
  </style>
</head>
<body>
  <div class="stars"></div>
  <div class="card">
    <h1>Identify.</h1>
    <input type="text" id="userInput" placeholder="Username">
    <input type="password" id="passInput" placeholder="Password">
    <button id="loginBtn">Enter Universe</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    // --- PASTE YOUR ACTUAL KEYS HERE ---
    const firebaseConfig = {
    apiKey: "AIzaSyCFwrqG63P6fo-DNtansqfe73zpy_yJ1jA",
    authDomain: "celestialcanvas-cac1e.firebaseapp.com",
    databaseURL: "https://celestialcanvas-cac1e-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "celestialcanvas-cac1e",
    storageBucket: "celestialcanvas-cac1e.firebasestorage.app",
    messagingSenderId: "957600979058",
    appId: "1:957600979058:web:0fd4ca1ede86ae19e40aeb"
  };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    document.getElementById('loginBtn').onclick = async function() {
      const user = document.getElementById('userInput').value.trim();
      const pass = document.getElementById('passInput').value.trim();
      const btn = document.getElementById('loginBtn');

      if (!user || !pass) return alert("Please fill in both fields.");

      btn.disabled = true;
      btn.innerText = "Connecting...";

      try {
        const dbRef = ref(db);
        const snapshot = await get(child(dbRef, `users/${user}`));

        if (snapshot.exists()) {
          const userData = snapshot.val();
          if (userData.password === pass) {
            localStorage.setItem('visitorName', user);
            window.location.href = (userData.role === "admin") ? "admin.html" : "question1.html";
          } else {
            alert("Wrong password. Try again.");
          }
        } else {
          alert("User not found in the stars. (Check your Firebase Data)");
        }
      } catch (error) {
        console.error(error);
        alert("Connection Error: " + error.message);
      } finally {
        btn.disabled = false;
        btn.innerText = "Enter Universe";
      }
    };
  </script>
</body>
</html>